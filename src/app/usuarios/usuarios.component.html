<div class="container-fluid">
  <div class="row flex-nowrap">
    <!-- Sidebar -->
    <div class="col-auto px-sm-2 px-0 bg-dark">
      <div class="d-flex flex-column align-items-center align-items-sm-center px-3 pt-2 text-white min-vh-100">
        <a class="d-flex align-items-center pb-3 mb-md-0 me-md-auto text-white text-decoration-none" href="/">
          <span class="fs-5 d-none d-sm-inline">Productos</span>
        </a>
        <hr>
        <ul class="nav nav-pills flex-column mb-sm-auto mb-0 align-items-center align-items-sm-start" id="menu">
          <li class="nav-item" style="width: 100%;">
            <a class="nav-link align-middle px-0 text-white text-start" href="/dashboard">
              <img src="../../assets/img/inicio_icon.svg" style="padding-right: 5px; width: 20px; height: 20px;"> <span
                class="ms-1 d-none d-sm-inline">Inicio</span>
            </a>
          </li>
          <li class="nav-item" style="width: 100%;">
            <a class="nav-link align-middle px-0 text-white text-start" href="/pedidos">
              <img src="../../assets/img/pedidos_icon.svg" style="padding-right: 5px; width: 20px; height: 20px;"> <span
                class="ms-1 d-none d-sm-inline">Pedidos</span>
            </a>
          </li>
          <li class="nav-item" style="width: 100%;">
            <a class="nav-link align-middle px-0 text-white text-start d-inline-flex" href="/agregar_producto">
              <img src="../../assets/img/ag_producto_icon.svg" style="padding-right: 5px; width: 20px; height: 20px; ">
              <span class="ms-1 d-none d-sm-inline">Agregar Producto</span>
            </a>
          </li>

          <li class="nav-item" style="background-color: #5A1236; width: 100%;">
            <a class="nav-link align-middle px-0 text-white text-start" href="/usuarios">
              <img src="../../assets/img/usuarios_icon.svg" style="padding-right: 5px; width: 20px; height: 20px;">
              <span class="ms-1 d-none d-sm-inline">Usuarios</span>
            </a>
          </li>
        </ul>
        <hr>
        <div class="dropdown pb-4">
          <a aria-expanded="false" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle"
            data-bs-toggle="dropdown" href="#" id="dropdownUser1">
            <img alt="hugenerd" class="rounded-circle" height="30" src="https://github.com/mdo.png" width="30">
            <span class="d-none d-sm-inline mx-1">Notificaciones</span>
          </a>
          <ul aria-labelledby="dropdownUser1" class="dropdown-menu dropdown-menu-dark text-small shadow">
            <li><a class="dropdown-item" href="#">New project...</a></li>
            <li><a class="dropdown-item" href="#">Settings</a></li>
            <li><a class="dropdown-item" href="#">Profile</a></li>
            <li>
              <hr class="dropdown-divider">
            </li>
            <li><a class="dropdown-item" href="#" (click)="cerrarSesion()">Cerrar sesión</a></li>
          </ul>
        </div>
      </div>
    </div>
    <!-- ./Sídebar   -->


    <!-- Contenido principal -->
    <div class="col py-3">
      <div class="row">
        <div class="col-lg-auto d-flex justify-content-between w-100 mb-4">
          <h4>Usuarios</h4>
        </div> <!-- ./Col -->

        <!--        Tabla de usuarios en AngularJS-->
        <div class="col-lg-12">
          <div class="table-responsive">
            <table class="table table-striped table-hover text-center">
              <thead>
                <tr>
                  <th>Nombre Completo</th>
                  <th>Rol</th>
                  <th>Email</th>
                  <th>Acciones</th>
                </tr>
              </thead>

              <tbody>
                <tr *ngFor="let usuario of usuarios" class="align-middle">
                  <td>{{usuario.nombre_completo}}</td>
                  <td>{{usuario.rol}}</td>
                  <td>{{usuario.email}}</td>
                  <td>
                    <button class="btn btn-primary" (click)="cargarUsuario(usuario)"
                      style="background-color: #5A1236; color: white; border:#5A1236" data-bs-target="#editarRolModal"
                      data-bs-toggle="modal" type="button">Editar rol</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div> <!-- ./Table-responsive -->
        </div> <!-- ./Row -->
      </div> <!-- ./Contenido principal -->

      <!-- Modal para editar rol -->
      <div class="modal fade" id="editarRolModal" tabindex="-1" aria-labelledby="editarRolModalLabel"
        aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="editarRolModalLabel">Editar rol</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <div class="form-group">

                <!-- mensajeError o mensajeExito segun sea el caso *alertas -->
                <div *ngIf="mensajeError" class="alert alert-danger" role="alert">
                  {{mensajeError}}
                </div>
                <div *ngIf="mensajeExito" class="alert alert-success" role="alert">
                  {{mensajeExito}}
                </div>
                

                <label for="rol">Rol</label>
                <select class="form-select" id="rol" [(ngModel)]="usuarioSeleccionado.rol" name="rol">
                  <option value="administrador">Administrador</option>
                  <option value="usuario">Usuario</option>
                </select>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn border-black" data-bs-dismiss="modal">Cerrar</button>
              <button type="button" class="btn btn-primary"  style="background-color: #5A1236; color: white; border:#5A1236" (click)="editarRol()">Guardar cambios</button>
            </div>
          </div>
        </div>