<div class="container-fluid">
	<div class="row flex-nowrap">
		<!-- Sidebar -->
		<div class="col-auto px-sm-2 px-0 bg-dark">
			<div class="d-flex flex-column align-items-center align-items-sm-center px-3 pt-2 text-white min-vh-100">
				<a class="d-flex align-items-center pb-3 mb-md-0 me-md-auto text-white text-decoration-none" href="/">
					<span class="fs-5 d-none d-sm-inline">Productos</span>
				</a>
				<hr>
				<ul class="nav nav-pills flex-column mb-sm-auto mb-0 align-items-center align-items-sm-start" id="menu">
					<li class="nav-item" style="width: 100%;">
						<a class="nav-link align-middle px-0 text-white text-start" href="/dashboard">
							<img src="../../assets/img/inicio_icon.svg" style="padding-right: 5px; width: 20px; height: 20px;"> <span
								class="ms-1 d-none d-sm-inline">Inicio</span>
						</a>
					</li>
					<li class="nav-item" style="width: 100%;">
						<a class="nav-link align-middle px-0 text-white text-start" href="/pedidos">
							<img src="../../assets/img/pedidos_icon.svg" style="padding-right: 5px; width: 20px; height: 20px;"> <span
								class="ms-1 d-none d-sm-inline">Pedidos</span>
						</a>
					</li>
					<li class="nav-item" style="background-color: #5A1236; width: 100%;">
						<a class="nav-link align-middle px-0 text-white text-start d-inline-flex" href="/agregar_producto">
							<img src="../../assets/img/ag_producto_icon.svg" style="padding-right: 5px; width: 20px; height: 20px; ">
							<span class="ms-1 d-none d-sm-inline">Agregar Producto</span>
						</a>
					</li>
					<li class="nav-item" style="width: 100%;">
						<a class="nav-link align-middle px-0 text-white text-start" href="/usuarios">
							<img src="../../assets/img/usuarios_icon.svg" style="padding-right: 5px; width: 20px; height: 20px;">
							<span class="ms-1 d-none d-sm-inline">Usuarios</span>
						</a>
					</li>
					<li class="nav-item" style="width: 100%;">
						<a class="nav-link align-middle px-0 text-white text-start" href="/reporte">
							<img src="../../assets/img/reporte_icon.svg" style="padding-right: 5px; width: 20px; height: 20px;">
							<span class="ms-1 d-none d-sm-inline">Reporte</span>
						</a>
					</li>
					<li class="nav-item" style="width: 100%;">
						<a class="nav-link align-middle px-0 text-white text-start" href="/ajustes">
							<img src="../../assets/img/ajustes_icon.svg" style="padding-right: 5px; width: 20px; height: 20px;">
							<span class="ms-1 d-none d-sm-inline">Ajustes</span>
						</a>
					</li>
				</ul>
				<hr>
				<div class="dropdown pb-4">
					<a aria-expanded="false" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle"
						data-bs-toggle="dropdown" href="#" id="dropdownUser1">
						<img alt="hugenerd" class="rounded-circle" height="30" src="https://github.com/mdo.png" width="30">
						<span class="d-none d-sm-inline mx-1">Notificaciones</span>
					</a>
					<ul aria-labelledby="dropdownUser1" class="dropdown-menu dropdown-menu-dark text-small shadow">
						<li><a class="dropdown-item" href="#">New project...</a></li>
						<li><a class="dropdown-item" href="#">Settings</a></li>
						<li><a class="dropdown-item" href="#">Profile</a></li>
						<li>
							<hr class="dropdown-divider">
						</li>
						<li><a class="dropdown-item" href="#">Sign out</a></li>
					</ul>
				</div>
			</div>
		</div>
		<!-- ./Sídebar   -->
		<!-- Contenido principal -->
		<div class="col py-3">



			<div class="row">
				<div class="col-lg-auto d-flex justify-content-between w-100 mb-4">
					<h4>Agregar Producto</h4>
					<button class="btn btn-primary" data-bs-target="#crearModal" data-bs-toggle="modal"
						style="background-color: #5A1236; color: white; border:#5A1236"
						style="background-color: #5A1236; border-color: #5A1236" type="button">
						Agregar nuevo producto
					</button>
				</div>
				<!--        Tabla de productos en AngularJS-->
				<div class="col-lg-12">
					<div class="table-responSíve">
						<table class="table table-striped table-hover text-center">
							<thead>
								<tr>
									<th scope="col">Imagen</th>
									<th scope="col">Nombre</th>
									<th scope="col">Precio</th>
									<th scope="col">Cantidad</th>
									<th scope="col">Recomendación</th>
									<th scope="col">Categoria</th>
									<th scope="col">Acciones</th>
								</tr>
							</thead>
							<tbody>
								<tr *ngFor="let producto of productos | paginate: { itemsPerPage: itemsPerPage, currentPage: page }">
									<!-- TODO provisional -->
									<td><img [src]="producto.imagen" alt="imagen" style="width: 50px; height: 50px;">
									</td>
									<td>{{ producto.nombre }}</td>
									<td>{{ producto.precio }}</td>
									<td>{{ producto.cantidad }}</td>
									<td>{{ producto.recomendacion }}</td>
									<td>{{ producto.categoria }}</td>
									<td>
										<!-- Botones de accion -->
										<button (click)="cargarProducto(producto)" class="btn bg-white border-black me-3"
											data-bs-target="#editarModal" data-bs-toggle="modal" type="button">
											Editar
										</button>
										<button (click)="eliminarProducto(producto)" class="btn btn-danger"
											style="background-color: #5A1236; color: white; border:#5A1236" type="button">
											Eliminar
										</button>
									</td>
								</tr>
							</tbody>
						</table>
						<!-- ./tabla -->
					</div>
				</div>

				<!-- paginacion -->
				<nav aria-label="Paginacion">
					<ul class="pagination justify-content-center">
						<li class="page-item" [class.disabled]="page === 1">
							<a class="page-link" (click)="page = page - 1" tabindex="-1">Anterior</a>
						</li>
						<ng-container *ngIf="Math.ceil(productos.length / itemsPerPage) > 4; else allPages">
							<li class="page-item" [class.active]="page === i + 1" *ngFor="let p of [].constructor(4); let i = index">
								<a class="page-link" (click)="page = i + 1">{{ i + 1 }}</a>
							</li>
							<li class="page-item">
								<a class="page-link puntos">...</a>
							</li>
							<li class="page-item" [class.active]="page === Math.ceil(productos.length / itemsPerPage)">
								<a class="page-link" (click)="page = Math.ceil(productos.length / itemsPerPage)">{{
									Math.ceil(productos.length / itemsPerPage) }}</a>
							</li>
						</ng-container>
						<ng-template #allPages>
							<li class="page-item" [class.active]="page === i + 1"
								*ngFor="let p of [].constructor(Math.ceil(productos.length / itemsPerPage)); let i = index">
								<a class="page-link" (click)="page = i + 1">{{ i + 1 }}</a>
							</li>
						</ng-template>
						<li class="page-item" [class.disabled]="page === Math.ceil(productos.length / itemsPerPage)">
							<a class="page-link" (click)="page = page + 1">Siguiente</a>
						</li>
					</ul>
				</nav> <!-- ./paginacion -->

			</div>
		</div>
	</div>
	<!-- ./contenido principal -->
	<!-- Modal xl de Editar -->
	<!-- Modal xl Crear -->
	<div aria-hidden="true" aria-labelledby="crearModalLabel" class="modal fade" id="crearModal" tabindex="-1">
		<div class="modal-dialog modal-xl">
			<div class="modal-content">
				<div class="modal-header" style="background-color: #5A1236; color: white;">
					<h5 class="modal-title" id="crearModalLabel">Agregar Producto</h5>
					<button aria-label="Close" class="btn-close bg-white" data-bs-dismiss="modal" type="button"></button>
				</div>
				<div class="modal-body d-flex justify-content-center">
					<!-- 2 columnas, la izquierda de 25% y la derecha de 75%, alineado vertical y horizontalmente -->
					<div class="row align-self-center justify-content-center">
						<!-- Alertas de error (mensajeError) o de exito (mensajeExito)  -->
						<div class="alert alert-danger" *ngIf="mensajeError" role="alert">
							{{ mensajeError }}
						</div>
						<div class="alert alert-success" *ngIf="mensajeExito" role="alert">
							{{ mensajeExito }}
						</div>
						<!-- ./alertas -->

						<div class="col-4 me-5">
							<!-- alineado vertical y horizontalmente, un placeholder de 250x250 y debajo un boton de cambiar imagen:
								- Imagen
								- Boton de cambiar imagen
									1. El boton llama a un event para seleccionar una imagen del dispositivo
									1.1 Cuando se selecciona la imagen se carga en el placeholder
									1.2 Se guarda la imagen en una variable
									1.3 Se guarda la imagen en el servidor
									2. El boton muestra un mensaje de exito o error
							-->
							<!-- Alineado -->
							<div class="d-flex justify-content-center align-items-center">
								<!-- Placeholder -->
								<img [src]="imagenIntroducida" alt="imagen" style="width: 250px; height: 250px;">
								<!-- Boton de cambiar imagen para seleccionar un archivo del equipo -->
							</div>
							<!-- Boton de cambiar imagen -->
							<div class="d-flex justify-content-center align-items-center mt-3">
								<button (click)="seleccionarImagen()" class="btn btn-primary"
									style="background-color: #5A1236; color: white; border:#5A1236" type="button">
									Agregar imagen
								</button>
							</div>
						</div>
						<div class="col-6 justify-content-start align-items-start d-grid">
							<!-- el formulario de dar de alta un producto:
		- Nombre
		- Precio
				Es un numero
		- Cantidad
				Es un numero
		- Recomendación
				Si
				No
		- Categoria
				Bebidas abiertas
				Bebidas cerradas
				Alimentos
		- Imagen
				Un selector de imagenes
		- Boton de guardar (se desactiva cuando hay campos vacios y se activa cuando todos estan)
		- Boton de cancelar
		-->
							<form>
								<div class="mb-3">
									<label class="form-label" for="nombre">Nombre</label>
									<input [(ngModel)]="nombreIntroducido" [ngModelOptions]="{standalone:true}" class="form-control"
										id="nombre" placeholder="Nombre del producto" type="text">
								</div>
								<div class="d-flex justify-content-between">
									<div class="mb-3 me-3">
										<label class="form-label" for="precio">Precio</label>
										<input [(ngModel)]="precioIntroducido" [ngModelOptions]="{standalone:true}" class="form-control"
											id="precio" placeholder="Precio del producto" type="number">
									</div>
									<div class="mb-3">
										<label class="form-label" for="cantidad">Cantidad</label>
										<input [(ngModel)]="cantidadIntroducida" [ngModelOptions]="{standalone:true}" class="form-control"
											id="cantidad" placeholder="Cantidad del producto" type="number">
									</div>
								</div>
								<div class="mb-3">
									<label class="form-label" for="recomendacion">Recomendación</label>
									<select [(ngModel)]="recomendacionIntroducida" [ngModelOptions]="{standalone:true}"
										class="form-select" id="recomendacion">
										<option value="" selected>Selecciona una recomendación</option>
										<option value="Si">Si</option>
										<option value="No">No</option>
									</select>
								</div>
								<div class="mb-3">
									<label class="form-label" for="categoria">Categoria</label>
									<select [(ngModel)]="categoriaIntroducida" [ngModelOptions]="{standalone:true}" class="form-select"
										id="categoria">
										<option value="" selected>Selecciona una categoria</option>
										<option value="Bebidas abiertas">Bebidas abiertas</option>
										<option value="Bebidas cerradas">Bebidas cerradas</option>
										<option value="Alimentos">Alimentos</option>
									</select>
								</div>
							</form>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<button class="btn bg-white border-black" data-bs-dismiss="modal" type="button">Cancelar</button>
					<button (click)="guardarProducto()"
						[disabled]="!nombreIntroducido || precioIntroducido < 0 || cantidadIntroducida < 0 || !recomendacionIntroducida || !categoriaIntroducida"
						class="btn btn-primary" style="background-color: #5A1236; color: white; border:#5A1236" type="button">
						Guardar
					</button>
				</div>
			</div>
			<!-- ./modal -->
		</div>
		<!-- ./modal-dialog -->
	</div>
	<!-- ./modal fade -->
</div>
<!-- ./container-fluid -->